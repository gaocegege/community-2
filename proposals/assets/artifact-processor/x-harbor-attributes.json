{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://raw.githubusercontent.com/goharbor/community/master/proposals/assets/artifact-processor/x-harbor-attributes.json",
    "type": "object",
    "title": "Harbor-specific configuration schema",
    "description": "The schema comprises the Harbor-specific configuration JSON document in artifact config layer",
    "default": {},
    "examples": [{
        "schemaVersion": 1,
        "icon": "https://github.com/caicloud/ormb/raw/master/docs/images/logo.png",
        "additions": [{
                "contentType": "text/plain; charset=utf-8",
                "name": "yaml",
                "digest": "sha256:xxx"
            },
            {
                "contentType": "text/plain; charset=utf-8",
                "name": "readme",
                "digest": "sha256:xxx"
            }
        ],
        "skipKeyList": [
            "metrics"
        ]
    }],
    "required": [
        "schemaVersion",
        "icon",
        "additions"
    ],
    "additionalProperties": true,
    "properties": {
        "schemaVersion": {
            "$id": "#/properties/schemaVersion",
            "type": "integer",
            "title": "The schemaVersion schema",
            "description": "The version of the schema, currently it only support 1, other number will not be recognized",
            "default": 1,
            "examples": [
                1
            ]
        },
        "icon": {
            "$id": "#/properties/icon",
            "type": "string",
            "title": "The icon schema",
            "description": "Artifact icon",
            "default": "",
            "examples": [
                "https://github.com/caicloud/ormb/raw/master/docs/images/logo.png"
            ]
        },
        "additions": {
            "$id": "#/properties/additions",
            "type": "array",
            "title": "The additions schema",
            "description": "additions of the artifact",
            "default": [],
            "examples": [
                [{
                        "contentType": "text/plain; charset=utf-8",
                        "name": "yaml",
                        "digest": "sha256:xxx"
                    },
                    {
                        "contentType": "text/plain; charset=utf-8",
                        "name": "readme",
                        "digest": "sha256:xxx"
                    }
                ]
            ],
            "additionalItems": true,
            "items": {
                "anyOf": [{
                    "$id": "#/properties/additions/items/anyOf/0",
                    "type": "object",
                    "title": "The addition schema",
                    "description": "One artifact addition",
                    "default": {},
                    "examples": [{
                        "contentType": "text/plain; charset=utf-8",
                        "name": "readme",
                        "digest": "sha256:xxx"
                    }],
                    "required": [
                        "contentType",
                        "name",
                        "digest"
                    ],
                    "additionalProperties": true,
                    "properties": {
                        "contentType": {
                            "$id": "#/properties/additions/items/anyOf/0/properties/contentType",
                            "type": "string",
                            "title": "The contentType schema",
                            "description": "Content type of the addition, currently it only support plain",
                            "default": "",
                            "examples": [
                                "text/plain; charset=utf-8"
                            ]
                        },
                        "name": {
                            "$id": "#/properties/additions/items/anyOf/0/properties/name",
                            "type": "string",
                            "title": "The name schema",
                            "description": "Name of the addition",
                            "default": "",
                            "examples": [
                                "readme"
                            ]
                        },
                        "digest": {
                            "$id": "#/properties/additions/items/anyOf/0/properties/digest",
                            "type": "string",
                            "title": "The digest schema",
                            "description": "Digest of the addition",
                            "default": "",
                            "examples": [
                                "sha256:xxx"
                            ]
                        }
                    }
                }],
                "$id": "#/properties/additions/items"
            }
        },
        "skipKeyList": {
            "$id": "#/properties/skipKeyList",
            "type": "array",
            "title": "The skipKeyList schema",
            "description": "There are key value pair in config layer describe the details of artifact.By default, all key value pair will be abstracted to artifact's extra attributes and stored in database, which will be displayed in Harbor UI. Keys in skipKeyList tells harbor that will not be added as artifact's attributes.So they can't be seen in Harbor UI",
            "items": {
                "type": "string"
            },
            "minItems": 1,
            "uniqueItems": true,
            "default": [],
            "examples": [
                "metrics"
            ]
        }
    }
}